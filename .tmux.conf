# ------------------------------------------------------------------------------
#  General
# ------------------------------------------------------------------------------
unbind-key C-b                  # release <C-b> for other uses
set-option -g prefix C-a        # change <Prefix> to <C-a>
bind-key C-a send-prefix        # send a <C-a> to underlying apps
bind-key -n M-\; command-prompt  # <A-;> for tmux command prompt - no prefix req.

# time in milliseconds tmux waits after an escape is input to determine if it is
# part of function/meta key sequence (default 500)
set-option -s escape-time 1

set-window-option -g mode-mouse on  # accept mouse events        - LEARN KEYS!

# Reload the tmux configuration file
bind-key r source-file ~/.tmux.conf \; display "Reloaded .tmux.conf"


# ------------------------------------------------------------------------------
# Copy/paste
# ------------------------------------------------------------------------------
# default-command - run for new windows
set-option -g default-command "reattach-to-user-namespace -l zsh"
set-window-option -g mode-keys vi  # use vim keybindings in copy mode

bind-key   -n M-[           copy-mode        # enter copy mode
bind-key   -t vi-copy v     begin-selection  # begin selection in vi-copy mode
# use copy-pipe to grab selection
bind-key   -t vi-copy y     copy-pipe "reattach-to-user-namespace pbcopy"
unbind-key -t vi-copy Enter
bind-key   -t vi-copy Enter copy-pipe "reattach-to-user-namespace pbcopy"


# ------------------------------------------------------------------------------
# Visual styling
# ------------------------------------------------------------------------------
# load (customized) powerline config file
source '/Users/errinlarsen/.config/powerline/tmux/powerline.conf'

set-option -g default-terminal "screen-256color"  # let tmux display 256 colors
set-option -g status-position top                 # position status bar at top
set-option -g message-bg colour20                 # command line BG color
set-option -g message-fg colour19                 # command line FG color

set-option -g pane-border-bg colour18              # BG color of Pane borders
set-option -g pane-border-fg colour18             # FG color of Pane broders
set-option -g pane-active-border-bg colour18       # BG color of ACTIVE Pane Bord
set-option -g pane-active-border-fg colour8      # FG color of ACTIVE Pane Bord

# The following is not working (because, Powerline):
# set-option -g status-bg colour235                 # status bar BG color
# set-option -g status-fg colour2                   # status bar FG color

# active window status bar colours - Powerline breaks this
# set-window-option -g window-status-current-bg colour12
# set-window-option -g window-status-current-fg colour20
# other windows status bar colours - Powerline breaks this
# set-window-option -g window-status-bg default
# set-window-option -g window-status-fg colour8


# ------------------------------------------------------------------------------
#  Sessions
# ------------------------------------------------------------------------------
# bind-key s choose-tree  # [DEFAULT] select session from a menu
bind-key S choose-tree  # select session from an interactive menu

bind-key -n M-0 switch-client -n # switch to next session
bind-key -n M-9 switch-client -p # switch to previous session


# ------------------------------------------------------------------------------
#  Windows
# ------------------------------------------------------------------------------
# Still having problems with tmuxinator
# set-option -g base-index 1       # start window numbers at 1 (default 0)

# Turn off automatically renaming windows to the current command running
set-window-option -g allow-rename off

# set-option -g      mouse-select-window on # select win. w\mouse  - LEARN KEYS!

# bind-key l last-window         # [DEFAULT] select last window
bind-key -n M-z resize-pane -Z   # zoom current pane to fill window

bind-key -n M-\ next-window      # select next window
bind-key -n M-. next-window      # select next window

bind-key -n M-| previous-window  # select prev window
bind-key -n M-, previous-window  # select prev window

bind-key -n M-i set-option synchronize-panes # toggle synchronize-panes on/off


# ------------------------------------------------------------------------------
#  Panes
# ------------------------------------------------------------------------------
# Still having problems with tmuxinator
# set-window-option -g pane-base-index 1   # start pane numbers at 1 (default 0)

# set-option -g      mouse-select-pane on  # select pane w\mouse   - LEARN KEYS!
# set-option -g      mouse-resize-pane on  # resize pane w\mouse   - LEARN KEYS!

bind-key    v   split-window -h # create a vertical pane
bind-key    s   split-window -v # create a horizaontal pane

bind-key -n M-h select-pane -L  # select pane to the left
bind-key -n M-j select-pane -D  # select pane below
bind-key -n M-k select-pane -U  # select pane above
bind-key -n M-l select-pane -R  # select pane to the right
